# L1 Why do we need SPICE simulations?

## Overview

This lecture introduces the fundamental connection between circuit design and SPICE simulations in VLSI. Circuit design focuses on how logic gates such as inverters, NAND, NOR, AND, etc., are physically implemented using specific arrangements of PMOS and NMOS transistors. For example, in a CMOS inverter, the PMOS is connected at the top to VDD and the NMOS at the bottom to VSS, with their gates tied together and drains connected to form the output. This specific configuration gives the inverter its logic functionality. However, designing the connection alone is not sufficient; we must also understand how the circuit behaves electrically, which is where SPICE simulations become essential. SPICE characterizes transistor behavior by modeling NMOS and PMOS I-V characteristics and generating output waveforms. These waveforms determine delay, and delay depends directly on transistor sizing (W/L ratio), since W/L controls drive current, which shapes the output transition and ultimately defines cell timing.

<p align="center">
  <img src="https://github.com/user-attachments/assets/1bc14eb2-9c7f-46fe-9df8-06d16fb0c258" />
</p>


The lecture then explains why SPICE is critical in real VLSI flows such as physical design, clock tree synthesis (CTS), timing closure, and static timing analysis (STA). Although SPICE is not directly visible in these flows, all timing values used in STA originate from SPICE-based characterization. Standard cell libraries contain delay tables indexed by input slew and output load capacitance. For different buffer types (e.g., CBUF1 vs CBUF2), delay tables differ because their transistor sizes (W/L ratios) differ, giving them different drive strengths. When performing timing analysis, the tool selects a delay by interpolating between table entries based on the actual input slew and load capacitance. However, these delay values are not arbitrary; they are generated by detailed SPICE characterization of each cell under multiple conditions. Therefore, SPICE forms the foundation of all delay modelling.

## Example

In the example discussed, the instructor explains that different buffer types (such as CBUF1 and CBUF2) have different delay behaviours because they are designed with different transistor sizes (different W/L ratios), resulting in different drive strengths. The delay of a buffer is not a fixed value; instead, it depends on two main parameters: input slew and output load capacitance. Input slew refers to how fast the input signal transitions, and output load refers to the total capacitance the buffer must drive, including fanout and wiring capacitance. These two parameters form a delay table, where rows represent input slew values and columns represent output load values. The intersection gives the delay for that specific condition. If the exact load or slew is not available in the table, interpolation is used to estimate the delay. Even if two buffers receive the same input slew and drive the same load, their delays can differ because their internal transistor sizing differs. The instructor emphasizes that these delay values are not arbitrary; they come from SPICE characterization of each cell under different slew and load conditions. Thus, SPICE simulations are the foundation for generating the delay tables used in timing analysis, and they ensure that the delay values used in static timing analysis accurately reflect real transistor-level behaviour.

<p align="center">
<img width="708" height="366" alt="image" src="https://github.com/user-attachments/assets/b3b673f2-4e89-4319-9881-299c2bfaf6af" />
<img width="655" height="367" alt="image" src="https://github.com/user-attachments/assets/6381f3df-e82b-4b95-92cc-0a1285a12dc8" />
</p>

## Conclusion

The lecture raises three critical questions: (1) Where do delay tables come from? — They come from SPICE characterization of transistor-level circuits. (2) Are these delay models accurate? — Accuracy must be verified by comparing STA-extracted delays with direct SPICE simulation results under identical conditions. (3) How do we trust STA results? — By validating that the characterization data (derived from SPICE) accurately reflects real transistor behaviour. Ultimately, understanding NMOS and PMOS device physics, their voltage-current characteristics, and how W/L sizing affects delay is necessary to understand the origin of timing libraries and ensure correct chip functionality before tape-out. The lecture concludes by transitioning to a detailed study of NMOS transistor characteristics as the foundation for SPICE-based delay modelling. <br>

***


# L2 Introduction to basic element in Circuit design – NMOS

This lecture explains the fundamental structure of an NMOS transistor and builds the foundation for understanding threshold voltage and SPICE modeling. An NMOS is a four-terminal device consisting of gate, source, drain, and body (or bulk). It is built on a p-type substrate, and the source and drain are formed using heavily doped n+ diffusion regions. Above the substrate lies a thin gate oxide layer, and on top of the oxide is a polysilicon or metal gate. Isolation regions are also present to electrically separate adjacent transistors so that the operation of one device does not affect another. While the body terminal is often not explicitly shown in simplified circuit symbols because it is usually grounded, it plays a very important role in determining the threshold voltage. Any potential applied to the body can modify the threshold voltage, which directly affects device behavior.

<p align="center">
<img width="602" height="268" alt="image" src="https://github.com/user-attachments/assets/9737419d-99b7-4b90-9b57-6fa56ab35e66" /> </p>

The PMOS transistor has a similar structure but is complementary to the NMOS. It is built on an n-type substrate with p+ source and drain regions. Apart from the doping differences, the general structure remains the same. Understanding this structural difference is important for CMOS design.

##
The most critical parameter governing transistor operation is the threshold voltage (Vₜ). Threshold voltage determines when a conducting channel forms between source and drain. In SPICE simulations, transistor behavior is represented through mathematical models, and threshold voltage is a key component of these models. Although the full SPICE model contains complex equations, conceptually threshold voltage can be viewed as a function of several physical and electrical parameters. Accurate modeling of Vₜ ensures that SPICE simulations correctly represent real transistor behavior.

<p align="center">
<img width="677" height="257" alt="image" src="https://github.com/user-attachments/assets/cee5ef2e-fb4b-4312-92d4-139f2e76d419" /> </p>

To understand threshold voltage formation, consider the case when the gate-to-source voltage (VGS) is zero and all terminals are grounded. In this condition, the NMOS contains two back-to-back PN junctions: one between source and body and another between drain and body. Since no bias is applied, both junctions are effectively off, resulting in very high resistance between source and drain. No conducting channel exists, and therefore no current flows. The transistor is in the OFF state.

##

When a small positive voltage is applied to the gate, the gate, oxide, and substrate form a capacitor structure. The gate acts as one plate, the substrate acts as the other plate, and the oxide serves as the dielectric. Applying a positive voltage charges the gate positively. Because the substrate is p-type and contains holes as majority carriers, the positive gate voltage repels these holes away from the surface region beneath the gate. As holes move deeper into the substrate, they leave behind negatively charged ions. This creates a depletion region under the gate. At this stage, although charge redistribution has begun, a conducting channel has not yet formed.

<p align="center">
<img width="672" height="258" alt="image" src="https://github.com/user-attachments/assets/cb5fb083-3d40-4d8d-9720-d09797cf7102" /> </p>

If the gate voltage is increased further, the depletion region widens, and more holes are pushed away. Eventually, the electric field becomes strong enough to attract electrons (minority carriers in the p-type substrate) toward the surface. When sufficient electrons accumulate, an inversion layer forms beneath the gate oxide. This inversion layer creates a continuous conducting path between the n+ source and n+ drain regions. The gate voltage at which this conducting channel is formed is defined as the threshold voltage. Once VGS exceeds Vₜ, the transistor turns ON and current can flow between source and drain.

Understanding this physical process is essential because SPICE models are built upon these device physics principles. The threshold voltage, channel formation mechanism, and charge behavior directly influence I–V characteristics, delay, and overall transistor performance. Since all timing libraries and delay models used in digital design ultimately originate from SPICE-based characterization, a strong understanding of NMOS structure and threshold voltage formation is fundamental to accurate circuit design and timing analysis.

***


